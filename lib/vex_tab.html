<dom-module id="vex-tab">
    <script type="text/javascript" src="packages/vextab/vextab-div.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.2.1/lodash.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>

    <link rel="stylesheet" type="text/css" href="packages/vextab/vextab.css" />
    <style type="text/css">
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
            font-size: 12px;
            color: #554;
            margin: 0px;
            height: 80%;
        }
        #error {
            font-family: Courier;
            color: red;
            width: 600px;
        }
        textarea#vextab-input {
            width: 500px;
            height: 300px;
            font-family: Courier;
            font-size: 12px;
            padding: 10px;
            margin-top: 40px;
            border: #eee solid 10px;
        }
    </style>
    <script type="text/javascript">
        // Load VexTab module.
        vextab = VexTabDiv;

        function loadVexTab() {
            VexTab = vextab.VexTab;
            Artist = vextab.Artist;
            Renderer = Vex.Flow.Renderer;
            Artist.DEBUG = true;
            VexTab.DEBUG = false;
            renderer = new Renderer($('#vextab-target')[0], Renderer.Backends.CANVAS);
            // Initialize VexTab artist and parser.
            artist = new Artist(10, 10, 600, {scale: 0.8});
            vextab = new VexTab(artist);
            function render() {
                try {
                    vextab.reset();
                    artist.reset();
                    vextab.parse($("#vextab-input").val());
                    artist.render(renderer);
                    $("#error").text("");
                } catch (e) {
                    console.log(e);
                    $("#error").html(e.message.replace(/[\n]/g, '<br/>'));
                }
            }
            $("#vextab-input").keyup(_.throttle(render, 250));
            render();
        }
    </script>
    <template>
        <h1>VexTab Playground</h1>

        <div style="float:left;width:600px;">
            <canvas id="vextab-target"></canvas>
            <div id="error"></div>
        </div>

        <div style="float:left;">
            <textarea id="vextab-input"></textarea>
        </div>
        <div id="content-holder">
            <content></content>
        </div>
    </template>
</dom-module>
